# R1.04 Systèmes d'exploitations

## Commandes de bases

### Se déplacer
```bash
cd  #Aller au chemin indiqué après cd
cd ~    #Aller à la racine du répertoire
```

### Afficher l'endroit où l'on se trouve
```bash
pwd     #Affiche l'endoit où l'on se trouve
```

### Commande ls
```bash
ls      #Affiche l'arborescence du dossier dans lequel on est
ls -l   #Affiche les droits des dossiers/fichiers du dossier dans lequel on est
```

### Créer un fichier/dossier
```bash
touch   #Créer un fichier
mkdir   #Créer un dossier
```

### Déplacer un fichier
```bash
mv      #Déplacer un fichier
```

### Copier un fichier
```bash
cp      #Copier un fichier
```

### Supprimer un fichier/dossier
```bash
rm      #Supprimer un fichier ou dossier vide
rm -r   #Supprimer un dossier et ce qu'il contient
```

### Attribuer les droits à un fichier/dossier
```bash
chmod   #Attribuer les droits à un dossier/fichier
```

### Afficher les processus en cours
```bash
ps      #Affiche les processus en cours sur la machine et leurs PID
kill    #Fermer un processus en cours d'éxecution
killall nomProcessus    #Ferme tout les processus ayant ce nom
```

### Trouver un fichier
```bash
find -name      #Affiche le chemin où se trouve le fichier
```

### Commande >
```bash
ls > repertoire     #Créer un fichier répertoire contenant une ligne, l'arborescence du dossier dans lequel on est
```

### Commande who
```bash
who     #Affiche une liste des utilisateurs actuellement connectés à l'ordinateur.
```

### Commande top
```bash
top     #Afficher les tâches
```

### Commande cat
```bash
cat     #Afficher le contenu d'un fichier
```

### Commande more
```bash
more    #Permet de voir du texte page par page
```

### Commande head
```bash
head        #Afficher par défaut les 10 premières lignes du fichier
head -nA    #Affiche les A premières lignes du fichier
```

### Commande tail
```bash
tail -nA    #Affiche les A dernières lignes du fichier
tail -n+A   #Affiche de la ligne A à la fin du fichier
```

### Commande grep
```bash
grep chaine nom_fichier     #Recherche une chaine de cracatères dans un fichier
```

### Effacer le terminal
```bash
clear   #Effacer le terminal
```

## Script Shell

### Créer le fichier
```bash
touch nomFichier.sh
```

### Exécuter le script
```bash
./nomFichier.sh
sh nomFichier.sh
```

### En-tête du script
```bash
#!/bin/bash
```

### Commande echo
```bash
echo "Hello World!"     #Affiche Hello World!
``` 

### Arguments
```bash
$1      #Premier argument
$N      #N-ième argument
$#      #Nombre total d'arguments
```

### Comparateurs
```bash
-eq     #Est égal à
-ne     #N'est pas égal à     
-gt     #Est plus grand que
-ge     #Est plus grand ou égal à
-lt     #Est plus petit que
-le     #Est plus petit ou égal à
```

### Déclarer variable
```bash
declare -a list=("Un" "Deux" "Trois" "Quatre" "Cinq" "Six" "Sept" "Huit" "Neuf" "Dix")      #Tableau
declare -f nom_fonction      #Fonction
declare -i var=5      #Entier
```

### Expression
```bash
let "nbr1=nbr1*3"       #nbr1 <- nbr1 * 3
let "nbr2=nbr1%2"       #nbr2 <- nb1 modulo 2
```

### Commande read
```bash
read variable? "Message à afficher"
read -p "Message à afficher" variable
echo $variable          #Affiche ce que l'utilisateur à saisi
```

### Fonctions
```bash
#Définition fonction
function nom_fonction {
   #Code
}

#Appel de la fonction
nom_function arg1 arg2
```

### Sed (Modification de fichier texte)
```bash
###############################
#   Remplacer les -ET- en &   #
###############################
sed 's/-ET-/ \& /g' texteSource.txt > texteModifie.txt

########################################
#   Ne pas afficher les lignes 2 à 4   #
########################################
sed '2,4 d' Exercice2.txt > test2-5.txt

########################################
#   Supprimer les lignes contenant 30  #
########################################
sed '/30/d' Exercice2.txt > test2-6.txt

##############################################
#  Supprimer les lignes ne contenant pas 20  #
##############################################
sed '/20/!d' Exercice2.txt > test2-7.txt

################################################################
##   Remplacer les lettres < / > par une virgule et les       ##
##   caractères < ; > par un < @ > en une seule commande sed  ##
################################################################
sed 's# /#,#g; s/;/@/g' Exercice2.txt > test2-4.txt

##################################################################
#   Remplacer les lettres < t > en début de ligne par un < T >   #
##################################################################
sed 's/^t/T/'  Exercice2.txt > test2-2.txt

```

### Boucles
```bash
########################
#     Boucle while     #
########################
while (( test )) ; do
#Code
done

################################################
#   Boucle for avec nombre d'itération connu   # 
################################################
for (( i=0; i<=5; i++ )) ; do  
#Code
done

########################
#      Même chose      #
########################
for i in {1..5} ; do
#Code
done

########################
#    Boucle infinie    #
########################
for (( ; ; )) ; do
#Code
done

```

### Conditions
```bash
########################
#       If else        #
########################
if [ test ]; then
#Code
fi

########################
#     If elif else     #
########################
if [ test ] ; then
#Code
elif [ test ] ; then
#Code
else
#Code
fi

########################
#        Switch        #
########################
case word in
   pattern1)
      Statement(s) to be executed if pattern1 matches
      ;;
   pattern2)
      Statement(s) to be executed if pattern2 matches
      ;;
   pattern3)
      Statement(s) to be executed if pattern3 matches
      ;;
   *)
     Default condition to be executed
     ;;
esac
``` 

### Utiles
```bash
# Si le dossier nom_dossier n'existe pas on le crée
function create {
    if [ ! -d "nom_dossier" ]; then
    mkdir nom_dossier
    fi
}

# Récupération de l'extension du paramètre
extension=".${argument##*.}"
# Récupération du nom du paramètre avant l'extension
nomFichier="${argument%%.*}"
```